<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>あじがさわBeach Party 2025</title>
    <style>
        img {
            display: block;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        .container {
            max-width: 1340px;
            margin: 0 auto;
        }

        section.main {
            width: 100%;
            height: auto;
            background-image: url(images/main_background.webp);
            background-size: cover;
            background-position: center;
            padding: 3rem;

            & img {
                width: 100%;
                height: auto;
            }
        }

        section.footer {
            width: 100%;
            height: auto;
            background-image: url(images/footer_background.webp);
            background-size: cover;
            background-position: center;
            padding: 3rem;

            & img {
                width: 100%;
                height: auto;
            }
        }

        .flex {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            margin-top: 2rem;
        }

        .flex_item {
            width: calc((100% - 60px) / 3);
            background: #FFF;
            padding: 1rem;
            border-radius: 1rem;
        }

        ul {
            list-style: disc;
            padding: 1em;
        }

        h1 {
            display: none;
        }

        #responsive-map-img {
            max-width: 100%;
            height: auto;
            display: block;
        }
    </style>

</head>

<body>
    <main>
        <section class="main">
            <div class="container">
                <img src="images/main_01.png" alt="" width="800" height="600">
                <img src="images/main_02.png" alt="" width="800" height="600">
                <img src="images/main_03.png" alt="" width="800" height="600">
                <img src="images/main_04.png" alt="" width="800" height="600">
                <img src="images/main_05.png" alt="" width="800" height="600">
                <!-- 店舗 -->
                <div class="flex">
                    <h1>店舗</h1>
                    <div class="flex_item">
                        <h2>尾崎酒造</h2>
                        <ul>
                            <li>メニュー</li>
                            <li>メニュー</li>
                            <li>メニュー</li>
                        </ul>
                    </div>
                    <div class="flex_item">
                        <h2>尾崎酒造</h2>
                        <ul>
                            <li>メニュー</li>
                            <li>メニュー</li>
                            <li>メニュー</li>
                        </ul>
                    </div>
                    <div class="flex_item">
                        <h2>尾崎酒造</h2>
                        <ul>
                            <li>メニュー</li>
                            <li>メニュー</li>
                            <li>メニュー</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <footer>
        <section class="footer">
            <div class="container">
                <div class="footer_head">
                    <img src="images/footer_head_01.png" usemap="#ImageMap" alt="" width="2658" height="577"
                        id="responsive-map-img" />
                    <map name="ImageMap">
                        <area shape="rect" data-original-coords="153,474,452,563" coords="153,474,452,563" href="#"
                            alt="左のリンク" />
                        <area shape="rect" data-original-coords="528,473,827,562" coords="528,473,827,562" href="#"
                            alt="中央のリンク" />
                        <area shape="rect" data-original-coords="887,474,1186,562" coords="887,474,1186,562" href="#"
                            alt="右のリンク" />
                    </map>
                    <img src="images/footer_head_02.png" alt="" width="800" height="600">
                    <img src="images/footer_head_03.png" alt="" width="800" height="600">
                    <img src="images/footer_head_04.png" alt="" width="800" height="600">
                    <img src="images/footer_head_05.png" alt="" width="800" height="600">
                </div>
                <div class="footer_body">
                    <img src="images/footer_body_01.png" alt="" width="800" height="600">
                    <img src="images/footer_body_02.png" alt="" width="800" height="600">
                    <img src="images/footer_body_03.png" alt="" width="800" height="600">
                    <img src="images/footer_body_04.png" alt="" width="800" height="600">
                    <img src="images/footer_body_05.png" alt="" width="800" height="600">
                </div>
            </div>
        </section>
    </footer>
    <script>
        // 画像の読み込みを遅延
        document.querySelectorAll('img').forEach(img => img.setAttribute('loading', 'lazy'));

        // マップのリンクをリサイズ
        function resizeMapAreas() {
            const img = document.getElementById('responsive-map-img');
            if (!img) return;

            const areas = document.querySelectorAll('map[name="ImageMap"] area');
            const originalWidth = 2658;   // 実際の画像幅
            const originalHeight = 577;    // 実際の画像高さ
            const currentWidth = img.clientWidth;
            const currentHeight = img.clientHeight;
            const xRatio = currentWidth / originalWidth;
            const yRatio = currentHeight / originalHeight;

            areas.forEach(area => {
                const originalCoords = area.getAttribute('data-original-coords').split(',').map(Number);
                const scaledCoords = originalCoords.map((coord, i) =>
                    i % 2 === 0 ? Math.round(coord * xRatio) : Math.round(coord * yRatio)
                );
                area.coords = scaledCoords.join(',');
            });
        }

        // 座標変換（800×600 → 2658×577）
        function convertCoordinates() {
            const xScale = 2658 / 800;
            const yScale = 577 / 600;

            const areas = document.querySelectorAll('map[name="ImageMap"] area');
            areas.forEach(area => {
                const oldCoords = area.getAttribute('coords').split(',').map(Number);
                const newCoords = [
                    Math.round(oldCoords[0] * xScale),
                    Math.round(oldCoords[1] * yScale),
                    Math.round(oldCoords[2] * xScale),
                    Math.round(oldCoords[3] * yScale)
                ];
                area.setAttribute('data-original-coords', newCoords.join(','));
                area.setAttribute('coords', newCoords.join(','));
            });
        }

        // 実行順序
        document.addEventListener('DOMContentLoaded', function () {
            convertCoordinates();  // まず座標変換
            resizeMapAreas();      // その後リサイズ処理
        });

        window.addEventListener('resize', resizeMapAreas);
    </script>
</body>

</html>